{
  "kind": "build_request",
  "title": "Restore Admin Dashboard visibility by adding missing backend isCallerAdmin query",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Implement a public backend query method `isCallerAdmin() : async Bool` in `backend/main.mo` that returns whether the `caller` is an admin according to the existing access-control state (use `AccessControl.isAdmin(accessControlState, caller)`), so the frontend `useIsCallerAdmin()` hook can successfully determine admin status.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-7",
          "msg-6"
        ],
        "quotes": [
          "Fix it",
          "The Admin Dashboard is still missing because the backend does **not** expose an `isCallerAdmin` function. The frontend calls `actor.isCallerAdmin()`, but this method does not exist in your Motoko canister, so the check always fails and the Admin tab stays hidden."
        ]
      },
      "acceptanceCriteria": [
        "The canister exposes a callable `isCallerAdmin` query in the generated interface so that `actor.isCallerAdmin()` from `frontend/src/hooks/useQueries.ts` resolves successfully.",
        "When signed in as a non-admin, `isCallerAdmin()` returns `false` (and does not trap).",
        "When signed in as an admin/owner principal (as defined by the existing authorization mixin / access control), `isCallerAdmin()` returns `true`.",
        "With the backend method added, the existing frontend logic in `frontend/src/App.tsx` shows the \"Admin\" tab when `isAdmin === true`, and the `AdminDashboard` view no longer fails due to a missing canister method."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor (all logic in `backend/main.mo`).",
    "Do not modify files under `frontend/src/components/ui` or other frontend immutable paths listed in SYSTEM_CONTEXT.",
    "Use English for any user-facing text (no new user-facing text is required for this fix)."
  ],
  "nonGoals": [
    "Do not redesign the Admin Dashboard UI.",
    "Do not change the existing admin authorization model/role assignments; only expose the missing admin-status query.",
    "Do not add new authentication providers beyond Internet Identity.",
    "Do not implement new analytics endpoints; only fix the missing `isCallerAdmin` method required by the existing frontend."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}