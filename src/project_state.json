{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 17,
  "summary": "Expand the health reminders/tracking app with owner-only admin analytics (usage dashboard), a Gen-Z styled gamified experience, and a downloadable build users can install (packaged as a distributable app).",
  "architectural_notes": [
    "Restrict analytics/usage endpoints to the canister owner (owner Principal) so only the app owner can access global usage data; regular users remain limited to their own data.",
    "Hide/disable Admin Dashboard UI for non-owner callers in the frontend in addition to backend authorization.",
    "Ensure rewards/badge unlocking logic supports sleep goals (not just hydration) and is computed deterministically from stored sleep tracking data so unlock state is consistent across sessions/devices."
  ],
  "known_issues": [
    "Sleep badge is not unlocking even after the user completes their sleep goal (badge unlock logic for sleep goals appears broken or missing).",
    "Build/deployment did not complete (deployment error encountered)."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-implement-internet-identity-sign-in-so-reminders-settings-and-intake-history-are-stored-per-user-principal",
      "title": "Implement Internet Identity sign-in so reminders, settings, and intake history are stored per user Principal.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-main-ui-to-configure-hydration-settings-daily-water-goal-reminder-interval-active-hours-window-and-default-cup-size",
      "title": "Build the main UI to configure hydration settings: daily water goal, reminder interval, active hours window, and default cup size.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-in-app-reminder-scheduler-that-triggers-during-the-configured-active-hours-and-uses-browser-notification-api-local-notifications-when-permission-is-granted-otherwise-show-an-in-app-toast-banner-reminder",
      "title": "Add an in-app reminder scheduler that triggers during the configured active hours and uses browser Notification API (local notifications) when permission is granted; otherwise show an in-app toast/banner reminder.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-intake-logging-ux-quick-add-buttons-based-on-default-cup-size-e-g-1-cup-250ml-custom-amount-and-display-today-s-progress-toward-the-daily-goal",
      "title": "Implement intake logging UX: quick-add buttons based on default cup size (e.g., +1 cup, +250ml, custom amount) and display today’s progress toward the daily goal.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-a-history-stats-view-for-recent-intake-at-minimum-today-and-the-last-7-days-with-a-simple-chart-or-list-breakdown",
      "title": "Provide a history/stats view for recent intake (at minimum: today and the last 7 days) with a simple chart or list breakdown.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-visual-theme-colors-typography-spacing-layout-appropriate-for-a-calm-hydration-health-app-and-use-it-consistently-across-all-pages-and-components-avoid-blue-purple-as-the-primary-palette",
      "title": "Apply a coherent visual theme (colors, typography, spacing, layout) appropriate for a calm hydration/health app and use it consistently across all pages and components (avoid blue/purple as the primary palette).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-add-generated-static-image-assets-to-the-frontend-and-use-them-in-the-ui-e-g-app-header-empty-states-by-serving-them-from-frontend-public-assets-generated-not-via-backend",
      "title": "Add generated static image assets to the frontend and use them in the UI (e.g., app header/empty states) by serving them from frontend/public/assets/generated (not via backend).",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-frontend-ui-to-include-new-sections-for-sleep-and-running-alongside-existing-hydration-features-using-clear-navigation-within-the-existing-app-layout",
      "title": "Extend the frontend UI to include new sections for Sleep and Running, alongside existing Hydration features, using clear navigation within the existing App layout.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-and-frontend-data-flow-for-sleep-running-and-custom-reminders-using-the-existing-actor-based-pattern",
      "title": "Add React Query hooks and frontend data flow for sleep, running, and custom reminders using the existing actor-based pattern.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-in-app-reminder-scheduler-to-support-triggering-reminders-for-the-new-reminder-types-sleep-and-user-defined-health-reminders-in-addition-to-hydration-using-browser-notifications-when-permitted-and-otherwise-an-in-app-banner-toast",
      "title": "Update the in-app reminder scheduler to support triggering reminders for the new reminder types (sleep and user-defined health reminders) in addition to hydration, using browser Notifications when permitted and otherwise an in-app banner/toast.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-s-visual-design-to-a-gen-z-cool-chill-vibes-style-across-all-existing-pages-hydration-reminders-sleep-running-history-settings-without-changing-core-functionality",
      "title": "Update the app’s visual design to a Gen-Z “cool/chill vibes” style across all existing pages (Hydration, Reminders, Sleep, Running, History, Settings) without changing core functionality.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-lightweight-rewards-gamification-system-for-hydration-tracking-that-users-can-see-in-the-ui-including-at-minimum-daily-goal-completion-celebration-a-hydration-streak-counter-and-at-least-3-unlockable-badges",
      "title": "Add a lightweight rewards/gamification system for hydration tracking that users can see in the UI, including at minimum: daily goal completion celebration, a hydration streak counter, and at least 3 unlockable badges.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-enhance-hydration-logging-feedback-to-feel-more-engaging-and-gen-z-after-logging-water-quick-add-or-custom-show-a-fun-chill-confirmation-message-and-when-appropriate-progress-reward-nudges-e-g-streak-saved-badge-unlocked",
      "title": "Enhance hydration logging feedback to feel more engaging and “Gen-Z”: after logging water (quick-add or custom), show a fun, chill confirmation message and (when appropriate) progress/reward nudges (e.g., “streak saved”, “badge unlocked”).",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-make-reminder-notifications-browser-notifications-and-in-app-banner-fallback-more-interesting-cool-and-chill-by-using-varied-copy-templates-and-picking-a-template-at-runtime-keep-messages-in-english-and-avoid-aggressive-or-shaming-language",
      "title": "Make reminder notifications (browser notifications and in-app banner fallback) more interesting, cool, and chill by using varied copy templates and picking a template at runtime; keep messages in English and avoid aggressive or shaming language.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-add-and-render-new-static-gen-z-vibe-illustration-assets-stickers-badges-background-accents-from-frontend-public-assets-generated-and-integrate-them-into-the-refreshed-ui-e-g-header-empty-states-rewards-surfaces-without-routing-through-the-backend",
      "title": "Add and render new static “Gen-Z vibe” illustration assets (stickers/badges/background accents) from frontend/public/assets/generated and integrate them into the refreshed UI (e.g., header/empty states/rewards surfaces) without routing through the backend.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-existing-history-tab-currently-water-intake-only-to-also-show-sleep-history-and-running-history-in-the-same-history-area-using-the-existing-sleep-and-running-history-data-already-available-in-the-app",
      "title": "Extend the existing History tab (currently water intake only) to also show Sleep History and Running History in the same History area, using the existing sleep and running history data already available in the app.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-make-it-clear-in-the-ui-when-the-sleepyhead-badge-will-unlock-and-why-it-is-locked-unlocked-by-adding-an-explicit-unlock-rule-and-a-live-progress-hint-based-on-today-s-sleep-total",
      "title": "Make it clear in the UI when the Sleepyhead badge will unlock and why it is locked/unlocked by adding an explicit unlock rule and a live progress hint based on today’s sleep total.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-identify-the-root-cause-of-the-failed-build-deployment-and-apply-the-minimal-code-config-changes-required-so-the-project-builds-and-deploys-successfully-on-the-internet-computer",
      "title": "Identify the root cause of the failed build/deployment and apply the minimal code/config changes required so the project builds and deploys successfully on the Internet Computer.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-short-developer-facing-troubleshooting-note-in-the-repository-documentation-describing-how-to-reproduce-the-build-deploy-locally-and-what-was-changed-to-prevent-the-previous-deployment-error-from-recurring",
      "title": "Add a short developer-facing troubleshooting note in the repository documentation describing how to reproduce the build/deploy locally and what was changed to prevent the previous deployment error from recurring.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-new-local-streak-break-reminder-that-notifies-the-user-when-their-current-hydration-streak-is-at-risk-of-breaking-streak-0-and-today-s-goal-is-not-yet-met-near-end-of-day-use-browser-notifications-when-permitted-otherwise-show-the-existing-in-app-reminder-banner",
      "title": "Implement a new local streak-break reminder that notifies the user when their current hydration streak is at risk of breaking (streak > 0 and today’s goal is not yet met, near end-of-day). Use browser notifications when permitted; otherwise show the existing in-app reminder banner.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-expose-user-controls-in-the-existing-reminders-ui-to-enable-disable-the-streak-break-reminder-and-configure-the-warning-window-timing-e-g-number-of-hours-before-day-end-persist-these-preferences-locally-device-using-localstorage",
      "title": "Expose user controls in the existing Reminders UI to enable/disable the streak-break reminder and configure the warning window timing (e.g., number of hours before day end). Persist these preferences locally (device) using localStorage.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-web-app-installable-as-a-progressive-web-app-pwa-by-adding-a-web-app-manifest-required-meta-tags-and-icon-assets-so-users-can-install-it-to-their-device-home-screen-desktop-and-mobile-via-the-browser-install-flow",
      "title": "Make the web app installable as a Progressive Web App (PWA) by adding a web app manifest, required meta tags, and icon assets so users can install it to their device home screen (desktop and mobile) via the browser install flow.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-service-worker-to-enable-basic-offline-support-for-the-installed-pwa-including-caching-of-the-app-shell-built-js-css-and-static-assets-and-a-safe-fallback-behavior-when-the-network-is-unavailable",
      "title": "Add a service worker to enable basic offline support for the installed PWA, including caching of the app shell (built JS/CSS and static assets) and a safe fallback behavior when the network is unavailable.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-expose-a-simple-in-app-install-affordance-that-helps-users-install-the-app-when-the-browser-supports-installation-using-english-user-facing-copy",
      "title": "Expose a simple in-app install affordance that helps users install the app when the browser supports installation, using English user-facing copy.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-add-brief-developer-facing-documentation-explaining-how-users-can-install-the-app-desktop-chrome-edge-android-ios-safari-guidance-and-how-to-verify-pwa-service-worker-behavior-locally",
      "title": "Add brief developer-facing documentation explaining how users can install the app (desktop Chrome/Edge + Android + iOS Safari guidance) and how to verify PWA/service-worker behavior locally.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-render-the-newly-generated-pwa-icon-assets-as-static-files-served-from-the-frontend-build-output-do-not-route-image-generation-or-serving-through-the-backend",
      "title": "Render the newly generated PWA icon assets as static files served from the frontend build output (do not route image generation or serving through the backend).",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-add-offline-first-persistence-for-user-generated-tracking-actions-so-users-can-continue-using-the-app-while-offline-when-the-device-is-offline-queue-hydration-intake-logs-sleep-logs-running-logs-and-settings-updates-locally-and-automatically-sync-them-to-the-backend-when-connectivity-is-restored",
      "title": "Add offline-first persistence for user-generated tracking actions so users can continue using the app while offline: when the device is offline, queue hydration intake logs, sleep logs, running logs, and settings updates locally and automatically sync them to the backend when connectivity is restored.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-cache-the-last-successfully-fetched-user-data-locally-so-the-app-can-display-meaningful-read-only-content-while-offline-including-today-s-totals-and-recent-history-for-hydration-sleep-and-running",
      "title": "Cache the last successfully fetched user data locally so the app can display meaningful read-only content while offline, including today’s totals and recent history for hydration, sleep, and running.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-expose-a-simple-in-app-control-to-enable-disable-save-for-offline-use-behavior-on-the-device-and-provide-english-helper-text-describing-what-is-saved-and-that-sync-happens-when-back-online",
      "title": "Expose a simple in-app control to enable/disable “Save for offline use” behavior on the device, and provide English helper text describing what is saved and that sync happens when back online.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a water drinking reminder app",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Create backend data models and APIs to store and retrieve a user’s hydration settings and intake log.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Add a sleep scheduler (sleep reminders, scheduling, and related tracking).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Add a running tracker (log runs and view basic running stats/history).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Support additional health reminders and trackers beyond hydration (configurable reminder types and tracking categories).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add backend data models and actor APIs for sleep scheduling and sleep tracking stored per authenticated caller Principal.",
      "reqIds": [
        "REQ-9"
      ],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add backend data models and actor APIs for a running tracker that lets an authenticated user log runs and view basic running history/stats stored per caller Principal.",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add backend support for additional (non-hydration) health reminders by allowing users to create, update, list, and delete custom reminder definitions stored per caller Principal.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add owner-only analytics tracking (unique users, DAU/WAU, event counts) and backend endpoints restricted to the canister owner.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Create an Admin Dashboard UI (visible only to the owner) to view analytics such as total users, DAU/WAU, and usage by feature area.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Update the app’s visual design to a Gen-Z style (cool/chill vibes) to make tracking enjoyable.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Add gamification/rewards for hydration/tracking (e.g., streaks, badges, progress rewards) to encourage daily use.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Enhance notifications to be more interesting, cool, and chill (copy/variations), while still supporting permission-based browser notifications and in-app fallback.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Add sleep history/stats view (e.g., last 7 days) similar to hydration history so users can review sleep tracking over time.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Add running history/stats view (e.g., recent runs + basic aggregates) so users can review running tracking over time.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Define and surface badge unlock criteria/timing for sleep goals (e.g., show when a sleep badge will unlock and why it did/didn’t).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Fix the Sleepyhead badge so it unlocks when a user completes the sleep goal, and ensure the rewards state returned by getUserRewards reflects the newly unlocked badge for the signed-in user.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Add a streak-break reminder (notify users when their streak is at risk of breaking) with Gen-Z chill messaging.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Update backend hydration streak logic so the stored streak represents consecutive days where the user met their daily hydration goal, and automatically resets when a day is missed.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Add a conditional Motoko state migration (backend/migration.mo) to safely upgrade existing stored user rewards to the updated streak data structure used by the new consecutive-day streak logic.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Provide a downloadable version of the app that users can install (e.g., packaged distribution such as PWA install flow or platform builds).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add an option for users to save/use app content offline (offline support via caching/service worker).",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Water Drinking Reminder App (settings, reminders, and intake tracking)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}