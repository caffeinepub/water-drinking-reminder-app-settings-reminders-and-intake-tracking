{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Goal/streak tracking app with rewards that unlock on goal completion.",
  "architectural_notes": [],
  "known_issues": [
    "Streaks are not being added/recorded.",
    "Goals are not being added/created.",
    "Rewards are not unlocking (likely tied to goal completion logic)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-update-the-frontend-intake-goal-completion-flow-so-that-after-adding-intake-online-the-ui-reliably-reflects-the-latest-streak-completed-goals-and-unlocked-badges-without-requiring-a-manual-refresh-and-surfaces-backend-errors-to-the-user",
      "title": "Update the frontend intake/goal completion flow so that after adding intake (online), the UI reliably reflects the latest streak, completed goals, and unlocked badges without requiring a manual refresh, and surfaces backend errors to the user.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Fix authorization/registration so that a newly signed-in user can create a profile and then successfully call core tracking methods (updateUserSettings, addDailyIntake, etc.) without hitting silent authorization failures.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Ensure daily goal completion is persisted exactly once per day per user and reliably increments completedGoals and streak in UserRewards when the hydration goal is first met for that day.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Fix reward/badge unlocking so that newly earned rewards are added to UserRewards.badges and persist across refreshes, based on the latest streak/goal progression.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Fix streak, goal completion, and reward unlocking not updating",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}